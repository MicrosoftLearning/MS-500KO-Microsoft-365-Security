# 모듈 1 - 랩 1 - 연습 2 - 사용자 및 그룹 관리 

다음 랩 연습에서는 Adatum Corporation 보안 관리자인 Holly Dickson 역할을 맡아 작업을 진행합니다. 이 연습에서는 Microsoft 365 내에서 다양한 사용자 및 그룹 관리 기능을 수행합니다. 구체적으로는 Office 365 그룹 2개를 만들고 기존 Microsoft 365 사용자를 해당 그룹의 구성원으로 할당합니다. 그런 후에 그룹 중 하나를 삭제하고 PowerShell을 사용하여 삭제된 그룹을 복구합니다.

**참고:** 랩 호스팅 공급자가 제공하는 VM 환경에는 기존 Microsoft 365 사용자 계정 10개와 기존 온-프레미스 사용자 계정 여러 개가 포함되어 있습니다. 이 과정의 랩 전반에 걸쳐 이러한 여러 기존 사용자 계정을 사용하게 됩니다. 따라서 번거로운 사용자 계정 만들기 작업을 수행할 필요가 없습니다. 사용자 계정 만들기는 대개 보안 관리자가 수행하는 작업이 아닙니다. 그리고 Microsoft 365 사용자 계정 만들기 프로세스를 잘 모르는 경우 이 연습에서 해당 프로세스를 진행해 볼 수 있습니다.


### 작업 2 - 그룹 만들기 및 관리  

이 작업에서 여러분은 Adatum의 신임 보안 관리자인 Holly Dickson의 역할을 맡아 Adatum의 Microsoft 365 파일럿 프로젝트 구현을 시작합니다. 이 작업을 시작하려면 먼저 MOD 관리자로 로그인되어 있는 Microsoft 365에서 로그아웃한 후 Holly의 계정으로 다시 로그인해야 합니다.<br/>

이 작업에서는 새 그룹 2개를 만든 후 해당 그룹에 사용자를 할당하는 방식으로 그룹을 관리합니다. 두 그룹 중 하나는 Office 365 그룹이고 다른 하나는 보안 그룹입니다. 이 두 그룹을 만들면 두 그룹 유형의 몇 가지 차이점을 확인할 수 있습니다. 그룹을 만든 후 두 그룹 중 하나를 삭제합니다. 그러면 Windows PowerShell을 사용하여 삭제된 그룹을 복구하는 방법을 살펴볼 다음 작업을 위한 환경이 설정됩니다.

1. 도메인 컨트롤러 1 VM에는 **LON-DC1\Admin** 계정으로, Microsoft 365에는 **MOD 관리자**로 여전히 로그인되어 있는 상태여야 합니다. **Microsoft 365 관리 센터** 탭에서 브라우저 오른쪽 위 모서리에 있는 **MOD 관리자**의 사용자 아이콘(**MA**가 표시된 원)을 선택한 후 **내 계정** 창에서 **로그아웃**을 선택합니다. <br/>
	
	**중요:** 특정 사용자 계정에서 로그아웃한 후 다른 사용자 계정으로 로그인할 때는 현재 탭을 제외한 모든 브라우저 탭을 닫아야 합니다. 이전 사용자가 사용했던 창을 닫아서 작업 중의 혼선을 방지하려면 이 모범 사례를 따라야 합니다. **로그아웃** 탭을 제외한 나머지 브라우저 탭을 지금 모두 닫습니다. 
	
2. Internet Explorer 브라우저에서 `https://portal.office.com/`으로 이동합니다. 

3. **계정 선택** 창에 방금 로그아웃한 관리자 계정만 표시됩니다. **다른 계정 사용**을 선택합니다. 

4. **로그인** 창에 **Holly@M365xZZZZZZ.onmicrosoft.com**을 입력합니다(여기서 ZZZZZZ는 랩 호스팅 공급자가 제공한 고유 테넌트 ID임). **다음**을 선택합니다.

5. **암호 입력** 창에서 `Pa55w.rd`를 입력하고 **로그인**을 선택합니다.

6. **Office 365로 작업을 완료하세요** 창이 표시되면 **X**를 선택하여 창을 닫습니다. 

7. **Office 365 홈 페이지**에서 **관리**를 선택하여 Microsoft 365 관리 센터를 엽니다(**관리** 위에 **Office 365 앱** 상자가 겹쳐져 있으면 **확인!** 을 선택하여 해당 상자를 닫습니다).

8. 설문 조사 창이 표시되면 **취소**를 선택합니다.

9. **Microsoft 365 관리 센터**의 왼쪽 탐색 창에서 **그룹**을 선택하고 그 아래에서 **활성 그룹**을 선택합니다. 

10. **활성 그룹** 페이지에서 그룹 목록 위의 메뉴 모음에 표시된 **그룹 추가**를 선택합니다.  

11. **그룹 유형 선택** 창에서 **Microsoft 365(권장)** 를 선택하고 **다음**을 선택합니다. 

12. **기본 사항 설정** 창의 **이름** 필드에 `Inside Sales`를 입력하고 **설명** 필드에는 `Collaboration group for the Inside Sales team`을 입력합니다. **다음**을 선택합니다.

13. **소유자 할당** 창에서 이 그룹의 소유자로 Allan Deyoung과 Patti Fernandez를 할당합니다. 
	- **소유자** 필드에 `Allan`을 입력합니다. 표시되는 드롭다운 메뉴에서 **Allan Deyoung**을 선택합니다. 
	- **소유자** 필드에 `Patti`를 입력합니다. 표시되는 드롭다운 메뉴에서 **Patti Fernandez**를 선택합니다. 
	- **다음**을 선택합니다.

14. 기본 설정을 그대로 유지하고 구성원 아래에서 '다음'을 클릭합니다.

15. **설정 편집** 창의 **그룹 전자 메일 주소** 필드에 `insidesales`를 입력합니다. **개인 정보** 섹션 아래에서 **공개** 옵션이 선택되어 있는지 확인하고(필요하면 해당 옵션 선택) **Microsoft Teams를 그룹에 추가** 섹션 아래에서 **이 그룹의 팀 만들기** 체크박스가 선택되어 있는지 확인합니다(필요하면 해당 체크박스 선택). **다음**을 선택합니다. 

15. **검토 및 그룹 추가 완료** 창에서 입력한 내용을 검토합니다. 모든 내용이 정확하면 **그룹 만들기**를 선택하고, 그렇지 않으면 **뒤로**를 선택하여 수정해야 하는 부분을 수정합니다(또는 조정해야 하는 특정 영역 아래의 **편집**을 선택해도 됨).

16. **새 그룹 생성됨** 창에서 페이지 위쪽의 설명(그룹 목록에 새 그룹이 표시되려면 5분 정도 걸릴 수 있다는 내용)을 확인합니다. </br>

	**닫기**를 선택합니다. 그러면 **그룹** 페이지로 다시 이동됩니다. 

17. 10~16단계를 반복하여 다음 정보로 새 그룹을 추가합니다.

	- 그룹 유형: `Security`

	- 이름: `IT Admins`

	- 설명: `IT administrative personnel` <br/>

	**참고:** 보안 그룹에는 소유자, 전자 메일 주소 또는 개인 정보 설정이 없습니다.

18. 새로 만든 두 그룹 중 하나라도 **그룹** 목록에 표시되지 않으면 1~2분 정도 기다렸다가 메뉴 모음의 **새로 고침** 옵션(**그룹 추가** 오른쪽에 있는 옵션)을 선택합니다. 두 그룹이 모두 표시되려면 몇 분 정도 더 기다려야 할 수 있습니다.

	**참고:** IT Admins 그룹은 보안 그룹이므로 그룹 전자 메일 주소는 없습니다. 추가로 사용 가능한 두 가지 그룹 유형은 메일 사용이 가능한 보안 그룹과 배포 그룹입니다. 이 랩에서 이러한 두 가지 그룹 유형을 사용하지 않은 이유는 이 두 그룹 유형이 그룹 목록에 표시되려면 최대 1시간이 걸릴 수도 있기 때문입니다. 반면 Office 365 그룹과 보안 그룹은 대개 몇 분 내에 그룹 목록에 표시됩니다. 

19. 이제 그룹에 구성원을 추가할 수 있습니다. **그룹** 목록에서 **Inside Sales** 그룹을 선택합니다. 그러면 해당 그룹의 창이 열립니다. 

20. **Inside Sales** 그룹 창에서 **구성원** 탭을 선택합니다.

21. **구성원** 섹션 아래에는 소유자 2명(Allan과 Patti)이 표시되지만 그룹 구성원은 0명입니다. 그룹에 구성원을 추가하려면 **구성원 모두 보기 및 관리**를 선택합니다. 

22. **Inside Sales** 그룹 창에서 **+ 구성원 추가**를 선택합니다. 그러면 현재 사용자 목록이 표시됩니다.

23. 사용자 목록에서 **Diego Siciliani**와 **Lynne Robbins**를 선택하고 아래쪽으로 스크롤하여 **추가(2)** 를 선택합니다. 

24. **뒤로 화살표**를 선택합니다. 

25. 이제 **Inside Sales** 창에 Diego와 Lynne이 그룹 구성원으로 표시됩니다. 창 오른쪽 위 모서리의 **X**를 선택하여 창을 닫습니다. 

26. 19~25단계를 반복하여 **Isaiah Langer**, **Megan Bowen** 및 **Nestor Wilke**를 **IT Admins** 그룹 구성원으로 추가합니다.

27. 이제 그룹 삭제 시의 결과를 테스트해 보겠습니다. **그룹** 목록에서 **Inside Sales** 그룹 오른쪽에 표시되어 있는 세로 줄임표 아이콘(**기타 작업**)을 선택합니다. 표시되는 메뉴 상자에서 **그룹 삭제**를 선택합니다. 

28. **Inside Sales 삭제** 창에서 **그룹 삭제** 단추를 선택합니다.

29. 그룹이 삭제되면 **닫기**를 선택합니다. 

30. 그러면 **Microsoft 365 관리 센터**의 **그룹** 목록이 다시 표시됩니다. 해당 목록에 **Inside Sales** 그룹은 더 이상 표시되지 않습니다. Inside Sales 그룹이 계속 표시되면 몇 분 정도 기다렸다가 메뉴 모음에서 **새로 고침** 옵션을 선택합니다. 업데이트된 **그룹** 목록에는 Inside Sales 그룹이 더 이상 포함되어 있지 않습니다.

31. 이 그룹 삭제로 인해 소유자나 구성원이 영향을 받았는지를 확인하려면 왼쪽 탐색 창에서 **사용자**, **활성 사용자**를 차례로 선택합니다. 

32. **활성 사용자** 목록에서 Inside Sales 그룹의 소유자 2명(**Allan Deyoung** 및 **Patti Fernandez**)과 구성원 2명(**Diego Siciliani** 및 **Lynne Robbins**)이 사용자 목록에 계속 표시되는지 확인합니다. 즉, 그룹을 삭제해도 해당 그룹의 소유자나 구성원이었던 사용자 계정은 삭제되지 않습니다.

33. 도메인 컨트롤러 VM에 로그인한 상태로 다음 작업에서 사용할 수 있도록 브라우저에 Microsoft 365 관리 센터를 열어 둡니다.


### 작업 3 - PowerShell을 사용하여 그룹 복구 

이 작업에서는 Windows PowerShell을 사용하여 앞에서 삭제했던 Inside Sales 그룹을 복구합니다. Windows PowerShell을 사용하여 이 Azure AD 관련 작업을 수행하려면 Windows Azure Active Directory PowerShell 모듈이 설치되어 있어야 합니다. 

**참고:** Windows Azure Active Directory PowerShell 모듈은 이전 랩에서 설치한 상태여야 합니다.   

1. **LON-DC1** VM에 **ADATUM\Administrator**(암호 **Pa55w.rd**)로 로그인되어 있지 않다면 지금 로그인합니다.

2. 이전 연습에서 사용했던 Windows PowerShell이 아직 열려 있으면 작업 표시줄에서 **Windows PowerShell** 아이콘을 선택합니다. 그렇지 않은 경우에는 이전 연습에서와 같이 Windows PowerShell의 관리자 권한 인스턴스를 열어야 합니다. PowerShell 창을 최대화합니다.

3. **Windows PowerShell**에서 다음 명령을 입력합니다(각 명령을 입력한 후 Enter 키를 눌러야 함).

	- Active Directory cmdlet 요청을 사용하려면 다음 명령을 실행하여 인증된 계정에 연결해야 합니다. <br/> 
	
		‎`Connect-AzureAD`   

	- 자격 증명을 요청하는 새 창이 표시됩니다. Holly의 Microsoft 365 계정인 **Holly@M365xZZZZZZ.onmicrosoft.com**(여기서 ZZZZZZ는 랩 호스팅 공급자가 제공한 고유 테넌트 ID임)과 암호 **Pa55w.rd**를 사용하여 로그인합니다.  

	- 그런 후에 다음 명령을 실행하여 삭제된 그룹의 리포지토리를 표시해야 합니다(그러면 앞에서 삭제한 **Inside Sales** 그룹이 표시됨).<br/>  
	
		‎`Get-AzureADMSDeletedGroup`   

	- 삭제한 이 그룹을 복원하려면 먼저 삭제된 그룹 표에 표시되는 Inside Sales 그룹의 개체 ID를 복사해야 합니다. 다음 명령을 수행하여 그룹을 복원할 때 이 ID를 사용하여 복원할 그룹을 식별합니다. <br/>
	
		ID를 복사하려면 전체 ID를 선택하고 Ctrl+C를 누릅니다.

	- 그런 후에 다음 명령을 실행하여 개체 ID가 입력한 값과 일치하는 삭제된 그룹을 검색하여 복원해야 합니다.<br/>  

		‎**참고:** 다음 명령의 {objectId}는 이전 단계에서 복사한 Inside Sales 그룹의 ID 번호로 바꿉니다. 다음 Restore 명령을 입력한 후 {objectId} 매개 변수를 붙여넣는 부분이 표시되면 Ctrl+V를 눌러 ID를 붙여넣습니다. 그런 다음 Enter 키를 눌러 명령을 실행합니다. **참고:** Enter 키를 눌러도 아무런 변화가 없다면 개체 ID 뒤에 불필요한 숨김 문자를 붙여넣었기 때문일 수 있습니다. 이러한 상황이 발생하면 명령을 다시 입력하고 Ctrl+V를 누른 후에 Delete 키를 몇 번 눌러 보고 Enter 키를 다시 누릅니다.  <br/>

		‎`Restore-AzureADMSDeletedDirectoryObject -Id {objectId}`  
		
4. 다음 연습에서 사용할 수 있도록 Windows PowerShell 창을 열어 둡니다. 일단 PowerShell 창을 최소화해 두면 됩니다.

5. 이제 유효성 검사를 진행하여 **Inside Sales** 그룹이 복구되었음을 확인합니다. 이렇게 하려면 Internet Explorer 브라우저에서 **Microsoft 365 관리 센터**로 이동하여 왼쪽 탐색 창에서 **그룹**을 선택합니다. 그런 다음 그룹 아래에서 **활성 그룹**을 선택하여 그룹 목록을 표시합니다. 

6. **Inside Sales** 그룹이 복원되어 그룹 목록에 포함되어 있음을 확인합니다. Inside Sales 그룹이 표시되지 않으면 1~2분 정도 기다렸다가 Internet Explorer의 URL 오른쪽에 있는 **새로 고침** 아이콘을 선택합니다.

7. 이제 복구 프로세스에서 그룹 구성원이 올바르게 업데이트되었는지를 확인합니다. **그룹** 창에서 **Inside Sales** 그룹을 선택합니다.

8. **Inside Sales** 창에서 **구성원** 탭을 선택합니다. **Allan Deyoung**과 **Patti Fernandez**는 그룹 소유자로, **Diego Siciliani**와 **Lynne Robbins**는 그룹 구성원으로 표시되어야 합니다.

9. **Inside Sales** 창을 닫습니다.

10. 다음 작업에서 사용할 수 있도록 브라우저 창은 열어 둡니다. 


# 랩 종료
